# Pylint-Ignore

**WARNING: This file is programatically generated.**

This file is parsed by [`pylint-ignore`](https://pypi.org/project/pylint-ignore/)
to determine which
[Pylint messages](https://pylint.pycqa.org/en/stable/technical_reference/features.html)
should be ignored.

- Do not edit this file manually.
- To update, use `pylint-ignore --update-ignorefile`

The recommended approach to using `pylint-ignore` is:

1. If a message refers to a valid issue, update your code rather than
   ignoring the message.
2. If a message should *always* be ignored (globally), then to do so
   via the usual `pylintrc` or `setup.cfg` files rather than this
   `pylint-ignore.md` file.
3. If a message is a false positive, add a comment of this form to your code:
   `# pylint:disable=<symbol> ; explain why this is a false positive`


# Overview

 - [E1101: no-member (1x)](#e1101-no-member)
 - [W0201: attribute-defined-outside-init (1x)](#w0201-attribute-defined-outside-init)
 - [W0212: protected-access (8x)](#w0212-protected-access)
 - [W0511: fixme (10x)](#w0511-fixme)
 - [W0622: redefined-builtin (1x)](#w0622-redefined-builtin)
 - [W0703: broad-except (9x)](#w0703-broad-except)
 - [W0707: raise-missing-from (1x)](#w0707-raise-missing-from)
 - [W1113: keyword-arg-before-vararg (2x)](#w1113-keyword-arg-before-vararg)
 - [C0123: unidiomatic-typecheck (1x)](#c0123-unidiomatic-typecheck)
 - [R0401: cyclic-import (2x)](#r0401-cyclic-import)
 - [R0903: too-few-public-methods (5x)](#r0903-too-few-public-methods)
 - [R0912: too-many-branches (6x)](#r0912-too-many-branches)
 - [R0915: too-many-statements (4x)](#r0915-too-many-statements)
 - [R1702: too-many-nested-blocks (1x)](#r1702-too-many-nested-blocks)
 - [R1722: consider-using-sys-exit (1x)](#r1722-consider-using-sys-exit)


# E1101: no-member

## File coco/metric.py - Line 55 - E1101 (no-member)

- `message: Class '' has no 'callbacks' member`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  51: def start_metrics_server(port, callbacks=None, addr=""):
  ...
  53:     handler = CallbackMetricsHandler.factory(REGISTRY)
  54:     if callbacks is not None:
> 55:         handler.callbacks += callbacks
  56:     httpd = _ThreadingSimpleServer((addr, port), handler)
  57:     t = threading.Thread(target=httpd.serve_forever)
```


# W0201: attribute-defined-outside-init

## File coco/slack.py - Line 59 - W0201 (attribute-defined-outside-init)

- `message: Attribute 'task' defined outside __init__`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  49:     def start(self, loop):
  ...
  57:         self.loop = loop
  58:         self.queue = asyncio.Queue(maxsize=self.queue_size, loop=loop)
> 59:         self.task = asyncio.ensure_future(self.consume(), loop=loop)
  60:         self.started = True
  61:
```


# W0212: protected-access

## File coco/result.py - Line 184 - W0212 (protected-access)

- `message: Access to a protected member _checks of a client class`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-16T09:28:17`

```
  170:     def add_result(self, result):
  ...
  182:         self._result.update(result.results)
  183:         self._status.update(result.status)
> 184:         self._checks.update(result._checks)
  185:         self._state.update(result._state)
  186:         self._embedded.update(result._embedded)
```


## File coco/result.py - Line 185 - W0212 (protected-access)

- `message: Access to a protected member _state of a client class`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  170:     def add_result(self, result):
  ...
  183:         self._status.update(result.status)
  184:         self._checks.update(result._checks)
> 185:         self._state.update(result._state)
  186:         self._embedded.update(result._embedded)
  187:         if self._error:
```


## File coco/result.py - Line 186 - W0212 (protected-access)

- `message: Access to a protected member _embedded of a client class`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  170:     def add_result(self, result):
  ...
  184:         self._checks.update(result._checks)
  185:         self._state.update(result._state)
> 186:         self._embedded.update(result._embedded)
  187:         if self._error:
  188:             if result._error:
```


## File coco/result.py - Line 188 - W0212 (protected-access)

- `message: Access to a protected member _error of a client class`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  170:     def add_result(self, result):
  ...
  186:         self._embedded.update(result._embedded)
  187:         if self._error:
> 188:             if result._error:
  189:                 self._error = self._error + " ;" + result._error
  190:         else:
```


## File coco/result.py - Line 189 - W0212 (protected-access)

- `message: Access to a protected member _error of a client class`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  170:     def add_result(self, result):
  ...
  187:         if self._error:
  188:             if result._error:
> 189:                 self._error = self._error + " ;" + result._error
  190:         else:
  191:             self._error = result._error
```


## File coco/result.py - Line 191 - W0212 (protected-access)

- `message: Access to a protected member _error of a client class`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  170:     def add_result(self, result):
  ...
  189:                 self._error = self._error + " ;" + result._error
  190:         else:
> 191:             self._error = result._error
  192:         if self._msg:
  193:             self._msg.append(result._msg)
```


## File coco/result.py - Line 193 - W0212 (protected-access)

- `message: Access to a protected member _msg of a client class`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  170:     def add_result(self, result):
  ...
  191:             self._error = result._error
  192:         if self._msg:
> 193:             self._msg.append(result._msg)
  194:         else:
  195:             self._msg = result._msg
```


## File coco/result.py - Line 195 - W0212 (protected-access)

- `message: Access to a protected member _msg of a client class`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  170:     def add_result(self, result):
  ...
  193:             self._msg.append(result._msg)
  194:         else:
> 195:             self._msg = result._msg
  196:
  197:     def _add_reply(self, name: str, result: Dict[str, Tuple[str, int]]):
```


# W0511: fixme

## File coco/worker.py - Line 24 - W0511 (fixme)

- `message: TODO: we should smarten up the signal handling here. It should be added`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  22:
  23:
> 24: # TODO: we should smarten up the signal handling here. It should be added
  25: # directly to the event loop below, this will add the handler at import time.
  26: def signal_handler(*_):
```


## File coco/config.py - Line 103 - W0511 (fixme)

- `message: TODO: pretty much all logging messages config out of this module are ignored`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  101: logger = logging.getLogger(__name__)
  102:
> 103: # TODO: pretty much all logging messages config out of this module are ignored
  104: # as the default level has not yet been applied, some workaround should be
  105: # figured out. For the moment, just uncomment the line below
```


## File coco/blocklist.py - Line 117 - W0511 (fixme)

- `message: TODO: should this be logged here?`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   95:     def remove_hosts(self, hosts: List[str]) -> bool:
  ...
  115:                 f"Could not remove from blocklist. Requested hosts {bad_hosts} unknown."
  116:             )
> 117:             logger.debug(msg)  # TODO: should this be logged here?
  118:
  119:             raise InvalidUsage(
```


## File coco/worker.py - Line 121 - W0511 (fixme)

- `message: TODO: This will be used by certain kotekan endpoints that do not accept`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   54: def main_loop(
  ...
  119:
  120:                 # Parse URL query parameters
> 121:                 # TODO: This will be used by certain kotekan endpoints that do not accept
  122:                 #       POST but need parameters specified. If we find another scheme to
  123:                 #       make this work we should remove this feature as it is somewhat
```


## File coco/endpoint.py - Line 170 - W0511 (fixme)

- `message: TODO: Add an option to overwrite values only if present in request?`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   45:     def __init__(self, name, conf, forwarder, state):
  ...
  168:                             f"and in `send_state`)."
  169:                         )
> 170:                         # TODO: Add an option to overwrite values only if present in request?
  171:                     except KeyError:
  172:                         # That the values are being sent from the state doesn't mean they need to
```


## File coco/core.py - Line 191 - W0511 (fixme)

- `message: TODO: raise log level in failure case?`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  168:     def _call_endpoints_on_start(self):
  ...
  189:                 result = self.redis_sync.blpop(f"{name}:res")[1]
  190:                 self.redis_sync.delete(f"{name}:res")
> 191:                 # TODO: raise log level in failure case?
  192:                 logger.debug(f"Called /{endpoint.name} on start, result: {result}")
  193:
```


## File coco/config.py - Line 300 - W0511 (fixme)

- `message: TODO: validate the endpoint config in here`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  273: def _load_endpoint_config(config):
  ...
  298:             conf["name"] = name
  299:
> 300:             # TODO: validate the endpoint config in here
  301:             config["endpoints"].append(conf)
```


## File coco/core.py - Line 332 - W0511 (fixme)

- `message: TODO: move into config.py`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  292:     def _load_config(self, config_path: os.PathLike):
  ...
  330:
  331:         # Validate slack posting rules
> 332:         # TODO: move into config.py
  333:         for rdict in self.config["slack_rules"]:
  334:             if "logger" not in rdict or "channel" not in rdict:
```


## File coco/endpoint.py - Line 465 - W0511 (fixme)

- `message: TODO: should we do that concurrently?`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  289:     def _load_checks(self, check_dict: Dict) -> List[Check]:
  ...
  463:
  464:         # Forward the request to group and then to other coco endpoints
> 465:         # TODO: should we do that concurrently?
  466:         for forward in self.forwards_external:
  467:             result_forward = await forward.trigger(
```


## File coco/endpoint.py - Line 494 - W0511 (fixme)

- `message: TODO: run these concurrently?`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  289:     def _load_checks(self, check_dict: Dict) -> List[Check]:
  ...
  492:                 result_forward = await forward.trigger(self.type, {}, hosts)
  493:                 result.embed(forward.name, result_forward)
> 494:                 # TODO: run these concurrently?
  495:
  496:         if self.get_state:
```


# W0622: redefined-builtin

## File coco/endpoint.py - Line 692 - W0622 (redefined-builtin)

- `message: Redefining built-in 'callable'`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  688:     def __init__(
  ...
  690:         name: str,
  691:         type_: Union[str, List[str]],
> 692:         callable: Callable[[sanic.request.Request], Optional[dict]],
  693:     ):
  694:         self.name = name
```


# W0703: broad-except

## File coco/core.py - Line 138 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   48:     def __init__(self, conf, reset=False, check_config=False):
  ...
  136:         try:
  137:             self.qworker.start()
> 138:         except Exception:
  139:             self.qworker.join()
  140:
```


## File coco/core.py - Line 156 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  146:     def __del__(self):
  ...
  154:             try:
  155:                 self.redis_sync.rpush("queue", "coco_shutdown")
> 156:             except Exception as e:
  157:                 logger.error(
  158:                     f"Failed sending shutdown command to worker (have to kill it): {type(e)}: {e}"
```


## File coco/worker.py - Line 157 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   54: def main_loop(
  ...
  155:             # Unexpected exceptions are returned as HTTP 500 errors, and dump a
  156:             # traceback
> 157:             except Exception as e:
  158:                 etype = e.__class__.__qualname__
  159:                 msg = e.args[0] if e.args else None
```


## File coco/slack.py - Line 160 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  132:     def __init__(self, *args, token=None, **kwargs):
  ...
  158:                             )
  159:                         )
> 160:             except Exception as e:
  161:                 print(
  162:                     "Sending message to slack server failed: {}\nThis was the message:\n\t{}".format(
```


## File coco/slack.py - Line 210 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  204:     def emit(self, record):
  ...
  208:             payload["channel"] = self.channel
  209:             self.queue.push(payload)
> 210:         except Exception:
  211:             self.handleError(record)
  212:
```


## File coco/scheduler.py - Line 213 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  148:     def add_condition(self, condition):
  ...
  211:             ) as r:
  212:                 r.raise_for_status()
> 213:         except Exception as e:
  214:             logger.error(
  215:                 f"Scheduler failed calling {self.name}: ({e}). Has coco's sanic server crashed?"
```


## File coco/request_forwarder.py - Line 311 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  210:     def init_metrics(self):
  ...
  309:         except AsyncioTimeoutError:
  310:             return host, ("Timeout", 0)
> 311:         except Exception as e:
  312:             return host, (str(e), 0)
  313:         finally:
```


## File coco/endpoint.py - Line 589 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  550:     def client_send_request(host, port, metrics_port, args):
  ...
  587:             try:
  588:                 q_size = await metric.get("coco_queue_length_total", metrics_port, host)
> 589:             except Exception as err:
  590:                 if not isinstance(err, asyncio.CancelledError):
  591:                     print(f"Couldn't get queue fill level from cocod: {err}")
```


## File coco/endpoint.py - Line 617 - W0703 (broad-except)

- `message: Catching too general exception Exception`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  550:     def client_send_request(host, port, metrics_port, args):
  ...
  615:                         except ContentTypeError:
  616:                             result = {"Error": await resp.text()}
> 617:                 except Exception as e:
  618:                     return False, f"coco-client: Sending request failed: {e}"
  619:                 else:
```


# W0707: raise-missing-from

## File coco/worker.py - Line 130 - W0707 (raise-missing-from)

- `message: Consider explicitly re-raising using the 'from' keyword`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   54: def main_loop(
  ...
  128:                     endpoint = endpoints[endpoint_name]
  129:                 except KeyError:
> 130:                     raise InvalidPath(f"Endpoint /{endpoint_name} not found.")
  131:
  132:                 # Check that it is being requested with the correct method
```


# W1113: keyword-arg-before-vararg

## File coco/slack.py - Line 194 - W1113 (keyword-arg-before-vararg)

- `message: Keyword argument before variable positional arguments list in the definition of __init__ function`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  191: class SlackLogHandler(logging.Handler):
  ...
  192:     """Logging handler to post to Slack."""
  193:
> 194:     def __init__(self, channel, queue=None, *args, **kwargs):
  195:         super().__init__(*args, **kwargs)
  196:
```


## File coco/slack.py - Line 235 - W1113 (keyword-arg-before-vararg)

- `message: Keyword argument before variable positional arguments list in the definition of __init__ function`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  227: class SlackLogFormatter(logging.Formatter):
  ...
  233:     """
  234:
> 235:     def __init__(self, title=None, *args, **kwargs):
  236:         super().__init__(*args, **kwargs)
  237:         self.title = title
```


# C0123: unidiomatic-typecheck

## File coco/config.py - Line 212 - C0123 (unidiomatic-typecheck)

- `message: Use isinstance() rather than type() for a typecheck.`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-27T09:28:41`

```
  190: def merge_dict_tree(a, b):
  ...
  210:
  211:     # Different types should return b
> 212:     if type(a) != type(b):
  213:         return b
  214:
```


# R0401: cyclic-import

## File coco/metric.py - R0401 (cyclic-import)

- `message: Cyclic import (coco -> coco.core -> coco.worker)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`


## File coco/metric.py - R0401 (cyclic-import)

- `message: Cyclic import (coco -> coco.core)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`


# R0903: too-few-public-methods

## File coco/scheduler.py - Line 107 - R0903 (too-few-public-methods)

- `message: Too few public methods (1/2)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  105:
  106:
> 107: class Timer:
  108:     """Asynchronous timer."""
  109:
```


## File coco/config.py - Line 109 - R0903 (too-few-public-methods)

- `message: Too few public methods (0/2)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  107:
  108:
> 109: class DefaultValue:
  110:     """Tag a config node with a default value."""
  111:
```


## File coco/config.py - Line 116 - R0903 (too-few-public-methods)

- `message: Too few public methods (0/2)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  114:
  115:
> 116: class RequiredValue:
  117:     """Tag a config node as being required."""
  118:
```


## File coco/slack.py - Line 214 - R0903 (too-few-public-methods)

- `message: Too few public methods (1/2)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  212:
  213:
> 214: class SlackLogFilter(logging.Filter):
  215:     """Filter to allow slack messaging only when requested.
  216:
```


## File coco/endpoint.py - Line 672 - R0903 (too-few-public-methods)

- `message: Too few public methods (1/2)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  670:
  671:
> 672: class LocalEndpoint:
  673:     """An endpoint that will execute a callable solely within coco.
  674:
```


# R0912: too-many-branches

## File coco/endpoint.py - Line 45 - R0912 (too-many-branches)

- `message: Too many branches (25/12)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  38: class Endpoint:
  ...
  43:     """
  44:
> 45:     def __init__(self, name, conf, forwarder, state):
  46:         logger.debug(f"Loading {name}.conf")
  47:         self.name = name
```


## File coco/worker.py - Line 70 - R0912 (too-many-branches)

- `message: Too many branches (19/12)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  54: def main_loop(
  ...
  68:     """
  69:
> 70:     async def go():
  71:
  72:         # start the prometheus server for forwarded requests
```


## File coco/result.py - Line 251 - R0912 (too-many-branches)

- `message: Too many branches (22/12)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   10: class Result:
  ...
  249:         self._state.update(state)
  250:
> 251:     def report(self, report_type=None):
  252:         """
  253:         Generate a report.
```


## File coco/endpoint.py - Line 289 - R0912 (too-many-branches)

- `message: Too many branches (16/12)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   38: class Endpoint:
  ...
  287:             self._load_internal_forward(forward_to_coco, self.forwards_internal)
  288:
> 289:     def _load_checks(self, check_dict: Dict) -> List[Check]:
  290:         checks = list()
  291:         if not check_dict:
```


## File coco/check.py - Line 359 - R0912 (too-many-branches)

- `message: Too many branches (18/12)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  323: class StateReplyCheck(ReplyCheck):
  ...
  357:         super().__init__(name, on_failure, save_to_state, forwarder, state)
  358:
> 359:     async def run(self, result: Result):
  360:         """
  361:         Run the check on the given reply.
```


## File coco/endpoint.py - Line 403 - R0912 (too-many-branches)

- `message: Too many branches (25/12)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   38: class Endpoint:
  ...
  401:         return checks
  402:
> 403:     async def call(self, request, hosts=None, params=None):
  404:         """
  405:         Call the endpoint.
```


# R0915: too-many-statements

## File coco/endpoint.py - Line 45 - R0915 (too-many-statements)

- `message: Too many statements (69/50)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  38: class Endpoint:
  ...
  43:     """
  44:
> 45:     def __init__(self, name, conf, forwarder, state):
  46:         logger.debug(f"Loading {name}.conf")
  47:         self.name = name
```


## File coco/worker.py - Line 54 - R0915 (too-many-statements)

- `message: Too many statements (74/50)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  52:
  53:
> 54: def main_loop(
  55:     endpoints, forwarder, coco_port, metrics_port, log_level, frontend_timeout
  56: ):
```


## File coco/worker.py - Line 70 - R0915 (too-many-statements)

- `message: Too many statements (67/50)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  54: def main_loop(
  ...
  68:     """
  69:
> 70:     async def go():
  71:
  72:         # start the prometheus server for forwarded requests
```


## File coco/endpoint.py - Line 403 - R0915 (too-many-statements)

- `message: Too many statements (54/50)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   38: class Endpoint:
  ...
  401:         return checks
  402:
> 403:     async def call(self, request, hosts=None, params=None):
  404:         """
  405:         Call the endpoint.
```


# R1702: too-many-nested-blocks

## File coco/endpoint.py - Line 99 - R1702 (too-many-nested-blocks)

- `message: Too many nested blocks (6/5)`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
   45:     def __init__(self, name, conf, forwarder, state):
  ...
   97:                 )
   98:
>  99:         if self.save_state:
  100:             if isinstance(self.save_state, str):
  101:                 self.save_state = [self.save_state]
```


# R1722: consider-using-sys-exit

## File coco/worker.py - Line 88 - R1722 (consider-using-sys-exit)

- `message: Consider using sys.exit()`
- `author : Rick Nitsche <rick@phas.ubc.ca>`
- `date   : 2021-04-15T18:11:09`

```
  54: def main_loop(
  ...
  86:             if name == "coco_shutdown":
  87:                 logger.info("coco.worker: Received shutdown command. Exiting...")
> 88:                 exit(0)
  89:
  90:             # Use the name to get all info on the call and delete from redis.
```


